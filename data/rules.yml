version: "3.1"

rules:
- rule: Welcome user and client form
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - action: client_form
  - active_loop: client_form

- rule: submit client form
  condition:
  - active_loop: client_form
  steps:
  - action: client_form      
  - active_loop: null
  - action: action_save_client

- rule: say menu
  steps:
  - intent: init_request
  - action: action_menu
  - action: pizza_order_form
  - active_loop: pizza_order_form

- rule: submit form
  condition:
  - active_loop: pizza_order_form
  steps:
  - action: pizza_order_form      
  - active_loop: null            
  - action: utter_submit_form_pizza         
  - action: utter_slots_values

- rule: tell pizzas information
  steps:
  - intent: init_pizza_question
  - action: utter_init_pizza_question

- rule: tell pizza price
  steps:
  - intent: item_price
  - action: action_price

- rule: pizza availability
  steps:
  - intent: pizza_availability
  - action: action_pizza_availability

- rule: pizza without topping
  steps:
  - intent: pizza_question_toppings
  - action: action_pizza_question_toppings

- rule: change item with entity
  steps:
  - intent: item_change
  - action: utter_slots_values

- rule: delete order
  steps:
  - intent: cancel_order
  - action: utter_order_delete
  - active_loop: null

# - rule: check client name
#   steps:
#   - intent: provide_name
#   - action: check_client_name

# - rule: old client form
#   steps:
#   - intent: old_client
#   - action: old_client_form
#   - active_loop: old_client_form

# - rule: submit old client form
#   condition:
#   - active_loop: old_client_form
#   steps:
#   - action: old_client_form      
#   - active_loop: null    
#   - action: utter_submit_form_old_client

# - rule: start
#   steps:
#     - intent: init_request
#     - action: utter_init_request
# - rule: Activate form
#   steps:
#   - intent: item_start_generic
#   - action: pizza_order_form
#   - active_loop: pizza_order_form

- rule: out-of-scope
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope